<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>simple mode</title>
  <link href="https://cdn.bootcdn.net/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">
  <link href="./css/view.css" rel="stylesheet">
  <link href="./css/editor.css" rel="stylesheet">
  <link href="../dist/css/style.css" rel="stylesheet">
</head>

<body>
  <p>表格换行符测试</p>

  <!-- 编辑器 -->
  <div>
    <div id="editor-toolbar" class="editor-toolbar"></div>
    <div id="editor-text-area" class="editor-text-area"></div>
  </div>

  <div>
    selection: <span id="selection-text"></span>
  </div>

  <div style="margin-top: 20px;">
    <textarea id="text-content" readonly style="width: 100%; height: 500px;"></textarea>
  </div>

  <script src="js/init-content.js"></script>
  <script src="../dist/index.js"></script>
  <script>
    const E = window.wangEditor

    const content = [
      {
        "type": "paragraph",
        "children": [
          {
            "text": ""
          }
        ]
      },
      {
        "type": "table",
        "width": "auto",
        "children": [
          {
            "type": "table-row",
            "children": [
              {
                "type": "table-cell",
                "children": [
                  {
                    "text": "多行文本\n\r"
                  },
                  {
                    "text": "多行文本",
                    "bgColor": "rgb(225, 60, 57)"
                  },
                  {
                    "text": "\n\r多行文本",
                    "bgColor": "rgb(251, 233, 230)"
                  },
                  {
                    "text": "\n\r"
                  },
                  {
                    "text": "多行文本\n\r多行文本",
                    "bgColor": "rgb(255, 77, 79)"
                  },
                ],
                "isHeader": true
              }
            ]
          }
        ],
        "columnWidths": [
          276
        ],
        "scrollWidth": 276,
        "height": 127,
        "isHoverCellBorder": true,
        "resizingIndex": 0,
        "isResizing": false
      },
      {
        "type": "paragraph",
        "children": [
          {
            "text": ""
          }
        ],
        "isHoverCellBorder": false,
        "resizingIndex": -1,
        "isResizing": false
      }
    ]

    // const content = [
    //   {
    //     "type": "paragraph",
    //     "children": [
    //       {
    //         "text": ""
    //       }
    //     ]
    //   },
    //   {
    //     "type": "table",
    //     "width": "auto",
    //     "children": [
    //       {
    //         "type": "table-row",
    //         "children": [
    //           {
    //             "type": "table-cell",
    //             "children": [
    //               {
    //                 "type": "paragraph",
    //                 "children": [
    //                   {
    //                     "text": "多行文本"
    //                   }
    //                 ]
    //               },
    //               {
    //                 "type": "paragraph",
    //                 "children": [
    //                   {
    //                     "text": "多行文本",
    //                     "bgColor": "rgb(225, 60, 57)"
    //                   }
    //                 ]
    //               },
    //               {
    //                 "type": "paragraph",
    //                 "children": [
    //                   {
    //                     "text": "多行文本",
    //                     "bgColor": "rgb(251, 233, 230)"
    //                   }
    //                 ]
    //               },
    //               {
    //                 "type": "paragraph",
    //                 "children": [
    //                   {
    //                     "text": "多行文本",
    //                     "bgColor": "rgb(255, 77, 79)"
    //                   }
    //                 ]
    //               },
    //             ],
    //             "isHeader": true
    //           }
    //         ]
    //       }
    //     ],
    //     "columnWidths": [
    //       276
    //     ],
    //     "scrollWidth": 276,
    //     "height": 127,
    //     "isHoverCellBorder": true,
    //     "resizingIndex": 0,
    //     "isResizing": false
    //   },
    //   {
    //     "type": "paragraph",
    //     "children": [
    //       {
    //         "text": ""
    //       }
    //     ],
    //     "isHoverCellBorder": false,
    //     "resizingIndex": -1,
    //     "isResizing": false
    //   }
    // ]

    // editor 配置
    const editorConfig = {}
    editorConfig.placeholder = '请输入内容123...'
    editorConfig.onChange = (editor) => {
      const contentStr = JSON.stringify(editor.children, null, 2)
      document.getElementById('text-content').innerHTML = contentStr
      console.log(editor.getHtml())
      const selection = editor.selection
      document.getElementById('selection-text').innerHTML = JSON.stringify(selection, null, 2)
      console.log(selection)
    }

    const editor = E.createEditor({
      selector: '#editor-text-area',
      config: editorConfig,
      content,
      mode: 'simple'
    })

    const toolbar = E.createToolbar({
      editor,
      selector: '#editor-toolbar',
      config: {},
      mode: 'simple'
    })
  </script>
</body>

</html>
